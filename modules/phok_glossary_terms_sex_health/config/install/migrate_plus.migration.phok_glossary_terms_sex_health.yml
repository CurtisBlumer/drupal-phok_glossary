langcode: en
status: true
dependencies:
  module:
    - migrate_plus
  enforced:
    # List here the name of the module that provided this migration if you want
    # this config to be removed when that module is uninstalled.
    module:
      - phok_glossary_terms_sex_health
      - phok_glossary
# The source data is in CSV files, so we use the 'csv' source plugin.
id: phok_glossary_terms_sex_health
label: "Sexual health terms from CSV"
migration_group: glossary
migration_tags:
  - CSV
source:
  plugin: csv
  # Full path to the file.
  path: /artifacts/sex-health-terms.csv
  # The number of rows at the beginning which are not data.
  header_row_count: 1
  # These are the field names from the source file representing the uniquely
  # identifying information. They will be stored in the migration map table as
  # columns sourceid1, sourceid2, sourceid3, etc.
  keys:
    - uuid
  # Here we identify the columns of interest in the source file. Each numeric
  # key is the 0-based index of the column. For each column, the key below is
  # the field name assigned to the data on import, to be used in field mappings
  # below. The value is a user-friendly string for display by the migration UI.
  column_names:
    0:
      term: Term
    1:
      abbreviation: Abbreviation
    2:
      synonym: Synonyms
    3:
      related_term: Related terms
    4:
      definition: Definition
#    5:
#      audience: Glossary
#    6:
#      images: Images
    7:
      uuid: UUID
process:
  # The content (node) type we are creating is 'glossary_term'.
  node_type:
    plugin: default_value
    default_value: glossary_term
  # Most fields can be mapped directly - we just specify the destination (D8)
  # field and the corresponding field name from above, and the values will be
  # copied in.
  title: term
  term: term
  abbreviation: abbreviation
  # synonym: synonym
  # related_term:
  #   source: glossary_term
  #   plugin: entity_generate
  #   value_key: term
  #   bundle_key: nid
  #   bundle: glossary_term
  #   entity_type: node
  #   ignore_case: true
  definition: definition
#  images: images
destination:
  # Each row of data (line from the CSV file) will be used to create a node.
  plugin: entity:node
# List any optional or required migration dependencies.
# Requried means that 100% of the content must be migrated
# Optional means that that the other dependency should be run first but if there
# are items from the dependant migration that were not successful, it will still
# run the migration.
migration_dependencies:
  required: {}
  optional: {}
